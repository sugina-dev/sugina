<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Note Name Calculator</title>
  <link rel="stylesheet" href="/pubdyn/transform.css">
</head>
<body>
  <h1>Note Name Calculator</h1>
  <input id="freqInput" type="text" value="440" onkeyup="cnvFreq(this.value)" /> <span id="freqOutput">结果输出</span>
<script>
window.onload = document.getElementById("freqInput").onkeyup = function() {
  function myRound(n) {
    return n >= 0 ? Math.round(n) : -Math.round(-n);
  }
  function solve(f) {
    return myRound(12 * Math.log(f / 440) / Math.log(2)) + 57;
  }
  var noteName = ["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];
  var dif = solve(this.value);
  var divN = dif / 12 | 0;
  var modN = dif % 12 | 0;
  if (modN < 0) {
    divN -= 1;
    modN += 12;
  }
  document.getElementById("freqOutput").innerText = noteName[modN] + divN;
}
</script>
</body>
</html>
